# LOOM secure public profile example configuration.
# This profile reduces env complexity by applying safe defaults in code.
# Reviewed for v0.4.2 profile baseline.

LOOM_CONFIG_PROFILE=secure_public

# Public ingress and proxy trust
LOOM_REQUIRE_TLS_PROXY=true
LOOM_TLS_PROXY_CONFIRMED=true
LOOM_TRUST_PROXY=false
LOOM_TRUST_PROXY_ALLOWLIST=203.0.113.10/32,198.51.100.0/24

# Required secrets and signing identity
LOOM_ADMIN_TOKEN=replace-with-strong-random-token
LOOM_NODE_ID=loom-node.example.com
LOOM_SYSTEM_SIGNING_KEY_ID=k_sign_system_1
LOOM_SYSTEM_SIGNING_PRIVATE_KEY_PEM=replace-via-secret-manager
LOOM_NODE_SIGNING_KEY_ID=k_node_sign_local_1
LOOM_NODE_SIGNING_PRIVATE_KEY_PEM=replace-via-secret-manager

# Persistence
LOOM_PG_URL=postgresql://loom:replace-password@db.example.com:5432/loom
LOOM_PG_SSL=true
LOOM_PG_SSL_REJECT_UNAUTHORIZED=true

# Outbound safety allowlists (required on public service)
LOOM_FEDERATION_HOST_ALLOWLIST=.partner.example.com
LOOM_FEDERATION_BOOTSTRAP_HOST_ALLOWLIST=.partner.example.com
LOOM_REMOTE_IDENTITY_HOST_ALLOWLIST=.partner.example.com
LOOM_WEBHOOK_HOST_ALLOWLIST=.internal.example.com

# Optional explicit trust-anchor bindings
# LOOM_FEDERATION_TRUST_ANCHORS=agents.example=fed-hub.partner.example|fed-hub-dr.partner.example

# Optional local state encryption
# LOOM_STATE_ENCRYPTION_KEY=replace-with-32-byte-key-base64url
# LOOM_REQUIRE_STATE_ENCRYPTION_AT_REST=true
